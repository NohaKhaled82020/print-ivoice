<div class="invoice">
  <div class="invoice__wrapper">
    <div class="invoice__layout">
      <div class="invoice__content">
        <div
          *ngFor="let item of invoice.invoiceBlocks; let i = index"
          [class]="item.name"
          [ngStyle]="{
            padding: 10 + 'px',
            position: 'absolute',
            top: item?.styling?.y + 'px',
            left: item?.styling?.x + 'px',
            'background-color': item?.styling?.backgroundColor,
            color: item?.styling?.color,
            width: item?.styling?.width ? item?.styling?.width + 'px' : ''
          }"
        >
          <ng-container *ngIf="item.id !== 'table'">
            <div
              [innerHtml]="
                invoice.invoiceBlocks[i].htmlContent
                  | replaceKey: invoiceData
                  | safeHtml
              "
            ></div>
          </ng-container>
          <ng-container *ngIf="item.id === 'table'">
            <table
              style="width: 100%; height: 100%"
              class="table table-striped table-dark table-hover mb-0"
            >
              <thead>
                <tr>
                  <th
                    *ngFor="let key of invoice.invoiceBlocks[i]?.selectedFields"
                    scope="col"
                  >
                    {{ key | invoiceLineValue }}
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let row of invoiceData.invoiceLines">
                  <td
                    *ngFor="let key of invoice.invoiceBlocks[i]?.selectedFields"
                  >
                    {{ key | invoiceLineValue: row }}
                  </td>
                </tr>
              </tbody>
            </table>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
